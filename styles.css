:root{
  --cols: 20;
  --stage-maxw: 1280px;
  --stage-vw: 95vw;
  --bg-dark: #0f172a;
  --tile: 64px;
}
html,body{height:100%}
body{margin:0;background:var(--bg-dark);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#fff}

#stage{
  width:min(var(--stage-maxw),var(--stage-vw));
  aspect-ratio:16/9;
  margin:24px auto 96px;
  position:relative;border-radius:18px;overflow:hidden;
  box-shadow:0 20px 60px rgba(0,0,0,.35)
}
#scene{position:absolute;inset:0}

/* Lantai pixel */
.wood{
  background-color:#d7b07a; image-rendering:pixelated;
  background-image:
    repeating-linear-gradient(0deg,#e9c98e 0px,#e9c98e 12px,#d7b07a 12px,#d7b07a 28px),
    repeating-linear-gradient(90deg,#d7b07a 0px,#d7b07a 56px,#cfa86f 56px,#cfa86f 112px);
  background-size:auto,auto;
}

/* Dinding (collider) */
.wall{
  position:absolute;left:0;right:0;top:0;height:calc(var(--tile)*2.25);
  image-rendering:pixelated;
  background:
    repeating-linear-gradient(90deg,#efcfa1 0px,#efcfa1 24px,#e5c492 24px,#e5c492 48px),
    repeating-linear-gradient(0deg,#f3d7ac 0px,#f3d7ac 22px,#eacb9e 22px,#eacb9e 44px);
  border-bottom:4px solid #8b5e34; box-shadow:inset 0 -6px 0 #c08f58; z-index:1;
}

.coinbar{position:absolute;right:16px;top:16px;z-index:50;display:flex;gap:8px;align-items:center;background:#0b1220;color:#fff;padding:8px 12px;border-radius:999px;box-shadow:0 6px 24px rgba(0,0,0,.35)}
.dock{position:absolute;left:0;right:0;bottom:16px;z-index:50;display:flex;justify-content:center;gap:24px}
.dock .btn{width:64px;height:64px;border-radius:999px;background:rgba(0,0,0,.25);color:#fff;border:none;font-size:24px;display:grid;place-items:center;backdrop-filter:blur(2px);cursor:pointer}
.dock label{display:block;text-align:center;margin-top:6px;font-size:12px;color:#fff;opacity:.8}

.sprite{position:absolute;image-rendering:pixelated;user-select:none}
.label{position:absolute;background-color:rgba(255,255,255,.85);color:#111;border:1px solid rgba(0,0,0,.15);border-radius:6px;padding:2px 6px;font-weight:800;letter-spacing:2px;font-size:10px;user-select:none}
.z1{z-index:1}.z2{z-index:2}.z3{z-index:3}.z5{z-index:5}

/* Panel (sama gaya kayak orders) */
.panel,.orders{
  position:absolute;z-index:60;min-width:260px;max-width:340px;background:#0b1220;color:#fff;
  border:1px solid #223;border-radius:12px;padding:10px;box-shadow:0 16px 40px rgba(0,0,0,.5)
}
.panel h4,.orders h4{margin:2px 0 8px;font-size:14px;letter-spacing:.4px}
.panel .list,.orders .list{display:flex;flex-direction:column;gap:8px;max-height:260px;overflow:auto}
.panel .row,.orders .row{display:flex;align-items:center;gap:10px}
.panel .close,.orders .close{position:absolute;right:8px;top:6px;cursor:pointer;opacity:.8}
.panel .muted,.orders .muted{opacity:.7;font-size:12px}
.panel .btn, .btn{
  all:unset;background:#1b2542;padding:6px 10px;border-radius:8px;cursor:pointer;display:inline-flex;align-items:center;gap:8px
}
.panel .btn:hover{background:#25335f}

/* Switch */
.switch{display:inline-flex;align-items:center;gap:10px;cursor:pointer}
.switch input{appearance:none;width:42px;height:24px;border-radius:999px;background:#334155;position:relative;outline:none}
.switch input:checked{background:#22c55e}
.switch input::after{content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;border-radius:999px;background:#fff;transition:left .15s}
.switch input:checked::after{left:21px}

/* Progress bar di atas stove */
.cookbar{position:absolute;height:6px;background:#2dd4bf;border-radius:6px;left:0;right:0;bottom:-8px;transform-origin:left top}
.cookwrap{position:absolute;left:0;right:0;bottom:0;height:0}

/* Ikon item yang lagi dibawa */
.carry {
  position:absolute; left:50%; transform:translateX(-50%);
  bottom:100%; margin-bottom:6px;
  width:24px; height:24px; image-rendering:pixelated;
  filter: drop-shadow(0 2px 2px rgba(0,0,0,.35));
}

/* Highlight meja */
.glow{outline:3px solid #38bdf8; box-shadow:0 0 0 3px #38bdf8 inset, 0 0 24px rgba(56,189,248,.55); border-radius:8px}

/* Grid overlay (Settings) */
#stage.show-grid::after{
  content:'';position:absolute;inset:0;pointer-events:none;opacity:.25;
  background-image:
    repeating-linear-gradient(0deg, #000 0, #000 1px, transparent 1px, transparent calc(var(--tile))),
    repeating-linear-gradient(90deg,#000 0,#000 1px, transparent 1px, transparent calc(var(--tile)));
}

/* Toast */
.toast{
  position:absolute;left:50%;transform:translateX(-50%);bottom:96px;z-index:70;
  background:#0b1220;border:1px solid #223;padding:8px 12px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,.45)
}

/* ========== SHEET (kertas & bingkai kayu) ========== */
.sheet{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);   /* <-- bikin benar2 di tengah stage */
  z-index:70;
  display:none;

  /* ukuran responsif */
  width:min(900px,92%);
}

/* (opsional) kalau panelnya kepanjangan, biar tetap muat di tengah */
.sheet-body{
  max-height:56vh;   /* sudah ada sebelumnya; boleh pakai 56â€“60vh */
  overflow:auto;
}
.sheet-inner{position:relative;border-radius:12px;overflow:hidden;
  background:
    radial-gradient(120% 100% at 50% 0%, rgba(0,0,0,.12), transparent 40%),
    repeating-linear-gradient(0deg, #f3caa3, #f3caa3 12px, #efc498 12px, #efc498 24px);
}
.sheet-head{display:flex;align-items:center;justify-content:center;gap:10px;padding:12px 16px 4px}
.sheet-title{background:#545737;color:#fff;border-radius:999px;padding:6px 16px;font-weight:800;letter-spacing:.6px}
.sheet-close{position:absolute;right:14px;top:12px;background:#d94f4f;border:none;color:#fff;width:32px;height:32px;border-radius:999px;cursor:pointer;box-shadow:0 3px 0 rgba(0,0,0,.15)}
.sheet-close.sm{right:10px;top:10px;width:28px;height:28px}
.sheet-body{padding:16px 18px 18px;max-height:48vh;overflow:auto}

/* scrollbar turquoise */
.sheet-body::-webkit-scrollbar{width:10px}
.sheet-body::-webkit-scrollbar-thumb{background:#39d2d0;border-radius:8px}
.sheet-body{scrollbar-color:#39d2d0 transparent;scrollbar-width:thin}

/* ========== baris toko (ikon kiri, buy kanan) ========== */
.shop-col{display:flex;flex-direction:column;gap:16px}
.shop-row{display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:22px;background:#4a5241;box-shadow:inset 0 0 0 3px #626a57}
.shop-row.disabled{opacity:.65}
.shop-left{display:flex;align-items:center;gap:12px}
.chip{width:68px;height:48px;border-radius:16px;background:#dfe5ce;display:grid;place-items:center;box-shadow:inset 0 -2px 0 rgba(0,0,0,.15)}
.chip .pix{width:40px;height:40px;image-rendering:pixelated;object-fit:cover}
.txts .ttl{font-weight:800;letter-spacing:.3px}
.txts .sub{opacity:.9;font-size:13px;margin-top:2px}
.buy-btn{all:unset;display:flex;align-items:center;gap:10px;background:#f3c34b;color:#2a2100;font-weight:900;padding:10px 16px;border-radius:18px;cursor:pointer;box-shadow:0 3px 0 rgba(0,0,0,.18)}
.buy-btn[disabled]{opacity:.6;cursor:not-allowed}
.buy-btn .coin{font-size:18px}

/* ========== grid Add Menu ========== */
.menu-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:16px;justify-items:center}
.menu-item{all:unset;width:88px;height:88px;border-radius:999px;background:#efcfab;box-shadow:inset 0 0 0 6px #d9b689, 0 4px 0 rgba(0,0,0,.15);display:grid;place-items:center;cursor:pointer}
.menu-item img{width:56px;height:56px;image-rendering:pixelated}
.menu-item:hover{transform:translateY(-2px)}
.hint{margin-top:8px;text-align:center;font-size:12px;opacity:.8}

/* popup detail (buy) */
.sheet-overlay{position:absolute;inset:0;display:none;place-items:center;z-index:80}
.sheet-overlay::before{content:"";position:absolute;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(1px)}
.popup{position:relative;z-index:1;min-width:280px;max-width:360px;border-radius:14px;overflow:hidden;
  background:
    radial-gradient(100% 70% at 50% 0%, rgba(0,0,0,.08), transparent 40%),
    linear-gradient(#f1c79d,#efc395);
  border:6px solid #7b4b20; box-shadow:0 18px 50px rgba(0,0,0,.5)}
.popup-head{padding:8px 12px 2px;display:flex;justify-content:center;align-items:center}
.popup-title{background:#545737;color:#fff;border-radius:999px;padding:6px 14px;font-weight:800}
.popup-body{padding:12px}
.menu-popup{display:flex;flex-direction:column;align-items:center;gap:8px}
.menu-popup img{width:72px;height:72px;image-rendering:pixelated}
.menu-title{font-weight:900;letter-spacing:.6px}
.menu-price{opacity:.9;margin-bottom:8px}
.btn-primary{all:unset;background:#f3c34b;color:#2a2100;font-weight:900;padding:10px 16px;border-radius:12px;cursor:pointer;box-shadow:0 3px 0 rgba(0,0,0,.18)}
.btn-primary.wide{min-width:200px;text-align:center}

/* settings */
.settings .sec-title{font-weight:900;margin:10px 0 6px}
.slider-row{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:10px;background:#4a5241;color:#fff;padding:10px;border-radius:14px;margin:8px 0}
.slider-row .ico{font-size:18px}
.slider-row input[type="range"]{width:160px}
.center{display:flex;justify-content:center;margin:10px 0}
.stats{display:flex;gap:16px;justify-content:center;margin:6px 0 10px}
.pill{display:flex;align-items:center;gap:10px;background:#ffdeef;padding:8px 14px;border-radius:14px;color:#4c2b3b;font-weight:900}
.pill-ico{font-size:18px}
.pill-val{font-size:18px}

/* toast */
.toast{position:absolute;z-index:90;left:50%;transform:translateX(-50%);bottom:96px;background:#0b1220;border:1px solid #223;box-shadow:0 10px 30px rgba(0,0,0,.45);color:#fff;padding:10px 14px;border-radius:12px;display:none}
.toast.show{display:block;animation:fadeInOut 1.6s ease both}
@keyframes fadeInOut{0%{opacity:0;transform:translate(-50%,10px)}10%{opacity:1;transform:translate(-50%,0)}80%{opacity:1}100%{opacity:0;transform:translate(-50%,-4px)}}

/* ===== Orders panel (Cooking) ===== */
.orders{
  position:absolute;
  z-index:90;                          /* di atas overlay lain */
  width:min(420px, 92%);
  left:50%; top:50%;
  transform:translate(-50%,-50%);      /* CENTER di area game */
  background:#0b1220; color:#fff;
  border:1px solid #223; border-radius:12px;
  padding:12px;
  box-shadow:0 24px 60px rgba(0,0,0,.55);
}
.orders *{ box-sizing:border-box; }
.orders h4{ margin:0 0 10px; font-size:14px; letter-spacing:.4px }
.orders .list{
  display:flex; flex-direction:column; gap:6px;
  max-height:56vh;                     /* tinggi aman */
  overflow-y:auto; overflow-x:hidden;  /* hilangkan scrollbar horizontal */
}
.orders button{
  all:unset;
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; width:100%;
  background:#1b2542; padding:8px 10px; border-radius:8px; cursor:pointer;
}
.orders button:hover{ background:#25335f }
.orders .row{ display:flex; align-items:center; gap:10px; min-width:0 }
.orders img.icon{
  width:32px; height:32px;             /* paksa ukuran ikon */
  image-rendering:pixelated; flex:0 0 32px;
}
.orders .muted{ opacity:.7; font-size:12px }
.orders .close{
  position:absolute; right:8px; top:6px; cursor:pointer; opacity:.8;
}

/* ---- confirm modal helpers ---- */
.confirm-wrap{display:flex;flex-direction:column;align-items:center;gap:10px;text-align:center;min-width:240px}
.confirm-icon{font-size:40px;line-height:1}
.btn-row{display:flex;gap:12px;justify-content:center;margin-top:6px}
.btn-secondary{all:unset;background:#334;color:#fff;font-weight:800;padding:10px 16px;border-radius:12px;cursor:pointer;box-shadow:0 3px 0 rgba(0,0,0,.18)}

/* === Player cooking HUD === */
.player-cookwrap{
  position:absolute; z-index:99; height:0; pointer-events:none;
}
.player-cookbar{
  position:absolute; left:0; right:0; bottom:-10px; height:6px;
  background:#2dd4bf; border-radius:6px; transform-origin:left center;
  box-shadow:0 1px 0 rgba(0,0,0,.25);
}
